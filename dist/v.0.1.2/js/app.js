// !
// * Conjunto de funções do LivroDigital
// * FTE Developer - VG Consultoria
// * LivroDigital Beta V.0.1.2
// *
// * Generated by CoffeeScript 1.10.0
// !
(function(){$.form=function(e){var a;return $.form.send=function(e){return $.ajax({type:"post",url:"php/index.php",cache:!1,data:e,async:!1}).done(function(a){return e=a}),$.parseJSON(e)},a=$.form.send({ajax:e})},$.appCtrl||($.appCtrl={}),$.appCtrl.togo||($.appCtrl.togo={}),$.appCtrl=function(e){var a,t,p;if(p={_proccess:{_true:!1,togo:{},display:{},apr:{},atividade:{}},_erro:{_true:!1},_warning:{_true:!1},_done:{_true:!1},appCtrl:{}},p._proccess.post=!1,e.length>=1&&(p._proccess.post=!0),p._proccess.post===!0){for(a=0,t=[];a<e.length;)p.appCtrl[a]={},p.appCtrl[a]["this"]=$(e)[a],p.appCtrl[a].app=$($(e)[a]).data().appCtrl,p.appCtrl[a].app.togo&&(p._proccess.togo[a]={},p._proccess.togo[a]=$.appCtrl.togo(p.appCtrl[a])),p.appCtrl[a].app.display&&(p._proccess.display[a]=$.appCtrl.display(p.appCtrl[a])),p.appCtrl[a].app.apr&&(p._proccess.apr[a]={},p._proccess.apr[a]=$.appCtrl.apr(p.appCtrl[a])),p.appCtrl[a].app.atividade&&(p._proccess.atividade[a]={},p._proccess.atividade[a]=$.appCtrl.atividade(p.appCtrl[a])),t.push(a++);return t}},$.appCtrl.togo=function(e){var a;return a={_proccess:{_true:!1,volume:{},capa:{},content:{},seletor:{},display:{}},_erro:{_true:!1},_warning:{_true:!1},_done:{_true:!1}},$(e["this"]).click(function(){return void 0!==!e.app.togo.cover&&(a._proccess.volume=$(e["this"]).closest(".app-volume"),a._proccess.capa=$(a._proccess.volume).find(".app-cover"),a._proccess.content=$(a._proccess.volume).find(".app-contents"),e.app.togo.cover===!0&&a._proccess.content.removeClass("app-display").queue(function(e){return $(this).addClass("app-no-display").delay(1e3).queue(function(e){return $(this).removeClass("app-no-display"),e()}),a._proccess.capa.removeClass("app-no-display").queue(function(e){return $(this).addClass("app-display"),e()}),e()}),e.app.togo.cover===!1&&a._proccess.capa.removeClass("app-display").queue(function(e){return $(this).addClass("app-no-display").delay(1e3).queue(function(e){return $(this).removeClass("app-no-display"),e()}),a._proccess.content.removeClass("app-no-display").queue(function(e){return $(this).addClass("app-display"),$(".app-nav-section-item.app-secao").text("Sumário"),$(".app-nav-section-item.app-marker").text(""),$(".app-nav-section-item.app-titulo").text(""),e()}),e()})),void 0!==!e.app.togo.to&&(a._proccess.seletor="#"+e.app.togo.to,a._proccess.display=$.appCtrl.section(a._proccess.seletor,"app-display"),"first"===a._proccess.display.position.page&&(a.eq=0,!a._proccess.display.item["this"]==!1&&(a.eq=a._proccess.display.item.eq),$.appCtrl.sectionDisplay([[a._proccess.display.page["this"],"in","on"],[$(a._proccess.display.pattern).find(".section-page-item:eq("+a.eq+")"),"in","on"]])),("before"===a._proccess.display.position.page||"after"===a._proccess.display.position.page)&&(a.eq=0,!a._proccess.display.item["this"]==!1&&(a.eq=a._proccess.display.item.eq),a.eq>0&&$(".app-cap-section").removeClass("app-display"),void 0!==$(a._proccess.display.page["this"]).find(".section-page-item:eq("+a.eq+")").data()?(a.a=$(a._proccess.display.page["this"]).find(".section-page-item:eq("+a.eq+")").data().appCtrl.navigation.section,a.b=$(a._proccess.display.page["this"]).find(".section-page-item:eq("+a.eq+")").data().appCtrl.navigation.page,a.c="•",$(a._proccess.display.page["this"]).find(".section-page-item:eq("+a.eq+")").data().appCtrl.navigation.page===!1&&(a.b="",a.c="")):(a.a="Sumário",a.b="",a.c=""),$(".app-nav-section-item.app-secao").text(a.a),$(".app-nav-section-item.app-marker").text(a.c),$(".app-nav-section-item.app-titulo").text(a.b),delete a.a,delete a.b,delete a.c,$.appCtrl.sectionDisplay([[a._proccess.display.it.page["this"],"out",a._proccess.display.position.page],[a._proccess.display.it.item["this"],"out",a._proccess.display.position.page],[a._proccess.display.page["this"],"in",a._proccess.display.position.page],[$(a._proccess.display.page["this"]).find(".section-page-item:eq("+a.eq+")"),"in","on"]])),"this"===a._proccess.display.position.page&&("first"===a._proccess.display.position.item&&$.appCtrl.sectionDisplay([[$(a._proccess.display.page["this"]).find(".section-page-item:eq(0)"),"in","on"]]),("before"===a._proccess.display.position.item||"after"===a._proccess.display.position.item)&&$.appCtrl.sectionDisplay([[a._proccess.display.it.item["this"],"out",a._proccess.display.position.item],[a._proccess.display.item["this"],"in",a._proccess.display.position.item]]),"this"===a._proccess.display.position.item))?$.appCtrl.sectionDisplay([[a._proccess.display.item["this"],"in","on"]]):void 0}),a},$.appCtrl.sectionDisplay=function(e){var a,t,p,i;for(t=0;t<e.length;)i=e[t][0],a=e[t][1],p=e[t][2],"out"===a&&(void 0!==e[t][3]&&$(e[t][3]["this"]).scrollTop(e[t][3].position),$(i).removeClass("app-display").addClass(p).queue(function(e){return $(this).addClass("app-no-display").delay(700).queue(function(e){return $(this).removeClass("app-no-display").delay(1e3).queue(function(e){return $(this).removeClass("on after before").queue(function(e){return e()}),e()}),e()}),e()})),"in"===a&&(void 0!==e[t][3]&&$(e[t][3]["this"]).scrollTop(e[t][3].position),$(i).removeClass("app-no-display").addClass(p).delay(700).queue(function(e){return $(this).addClass("app-display").delay(1e3).queue(function(e){return $(this).removeClass("on after before").queue(function(e){return e()}),e()}),e()})),t++;return t=void 0},$.appCtrl.section=function(e,a){var t;return t={pattern:!1,page:{"this":!1,display:!1},item:{"this":!1,display:!1},it:{page:{"this":!1},item:{"this":!1}},position:{page:!1,item:!1}},t.pattern=$(e).closest(".app-volume"),$(e).hasClass("section-page")&&(t.page["this"]=$(e)),$(e).hasClass("section-page-item")&&(t.item["this"]=$(e)),t.page["this"]===!1&&$(e).closest(".section-page").length&&(t.page["this"]=$(e).closest(".section-page")),t.item["this"]===!1&&$(e).closest(".section-page-item").length&&(t.item["this"]=$(e).closest(".section-page-item")),t.page["this"]&&(t.page.eq=$("#"+$(t.page["this"])[0].id).index(".section-page")),t.item["this"]&&t.page["this"]&&(t.item.eq=$("#"+$(t.item["this"])[0].id).index("#"+$(t.page["this"])[0].id+" .section-page-item")),!t.page["this"]==!1&&(t.page["this"].hasClass(a)&&(t.page.display=!0),t.page.display===!1&&($(t.pattern).find(".section-page."+a).length>0&&(t.it.page["this"]=$(t.pattern).find(".section-page."+a)),t.it.page["this"]&&(t.it.page.eq=$("#"+$(t.it.page["this"])[0].id).index(".section-page")))),!t.item["this"]==!1&&(t.item["this"].hasClass(a)&&(t.item.display=!0),t.item.display===!1&&($(t.pattern).find(".section-page-item."+a).length>0&&(t.it.item["this"]=$(t.pattern).find(".section-page-item."+a)),t.it.item["this"]&&t.it.page["this"]&&(t.it.item.eq=$("#"+$(t.it.item["this"])[0].id).index("#"+$(t.it.page["this"])[0].id+" .section-page-item")))),t.page.display===!0&&(t.position.page="this"),t.page.display===!1&&t.it.page["this"]===!1&&(t.position.page="first"),t.page.eq<t.it.page.eq&&(t.position.page="before"),t.page.eq>t.it.page.eq&&(t.position.page="after"),t.item.display===!0&&(t.position.item="this"),t.item.display===!1&&t.it.item["this"]===!1&&(t.position.item="first"),t.item.eq<t.it.item.eq&&(t.position.item="before"),t.item.eq>t.it.item.eq&&(t.position.item="after"),t},$.appCtrl.display=function(e){var a;return a={_proccess:{classe_base:null,_true:!1},_erro:{_true:!1},_warning:{_true:!1},_done:{_true:!1}},$(e["this"]).click(function(){var t;if(a.classe_base="app-display",e.app.display.no&&(a.classe_base="app-no-display"),e.app.display.toogle)for(t=0;t<e.app.display.toogle.length;)$(e.app.display.toogle[t]).removeClass("app-no-display"),$(e.app.display.toogle[t]).removeClass("app-display"),t++;switch(e.app.display.who){case"this":$(e["this"]).addClass(a.classe_base),a._done=!0;break;case"closest":$($(e["this"]).closest(e.app.display.put)).addClass(a.classe_base),a._done=!0;break;case"child":$($(e["this"]).find(e.app.display.put)).addClass(a.classe_base),a._done=!0;break;case"all":$(e.app.display.put).addClass(a.classe_base),a._done=!0}if(e.app.display.inverse){if(!e.app.display.no)return e.app.display.no=!0;if(e.app.display.no)return e.app.display.no=!1}}),a},$.appCtrl.apr=function(e){var a;return a={_proccess:{_true:!1},_erro:{_true:!1},_warning:{_true:!1},_done:{_true:!1}},$(e["this"]).click(function(){return $($(this).closest(".app-apr-item")).toggleClass("app-apr-display-video"),void 0!==$($(this).closest(".app-apr-item")).find("iframe").attr("data-video-src")&&($($(this).closest(".app-apr-item")).find("iframe").attr("src",$($(this).closest(".app-apr-item")).find("iframe").data().videoSrc),$($(this).closest(".app-apr-item")).find("iframe").removeAttr("data-video-src")),a._done=!0}),a},$.appCtrl.atividade=function(e){var a;return a={_proccess:{_true:!1},_erro:{_true:!1},_warning:{_true:!1},_done:{_true:!1},btn:{}},a._proccess._true=!0,e.app.atividade.change===!0&&(e.app.atividade["true"]===!0&&$(e["this"]).addClass("true"),e.app.atividade["true"]===!1&&$(e["this"]).addClass("false"),a._proccess.change=!0),$(e["this"]).click(function(){return e.app.atividade.avaliar||e.app.atividade.change===!1&&(e.app.atividade["true"]===!0&&(e.app.atividade.change=!0,$(this).addClass("true"),$(this).data("appCtrl",e.app)),e.app.atividade["true"]===!1&&(e.app.atividade.change=!0,$(this).addClass("false"),$(this).data("appCtrl",e.app))),e.app.atividade.avaliar&&e.app.atividade.change===!1?($(e["this"]).toggleClass("on"),$(this).closest(".app-ati-item").find(".app-ati-item-change").click(function(){return $(e["this"]).closest(".app-ati-item").find(".app-ati-alternativa-item").addClass("off"),$(e["this"]).closest(".app-ati-item").find(".app-ati-alternativa-item.on").removeClass("off"),e.app.atividade["true"]===!0&&(e.app.atividade.change=!0,$(e["this"]).addClass("true"),$(e["this"]).removeClass("off"),$(e["this"]).data("appCtrl",e.app)),e.app.atividade["true"]===!1?(e.app.atividade.change=!0,$(e["this"]).addClass("false"),$(e["this"]).removeClass("off"),$(e["this"]).data("appCtrl",e.app)):void 0})):void 0}),a},$.appCtrl($("[data-app-ctrl]")),$.appScroll=!1,$(".app-cap-section").bind("scroll",function(){var e,a,t,p,i;if(p=$(this),a=p.find(".section-page-item"),$.appScroll===!1)for(e=0;e<a.length;){for(i=0;i<p.find("iframe").length;)$(p.find("iframe")[i]).offset().top<p.height()+10&&$(p.find("iframe")[i]).offset().top>0&&void 0!==$(p.find("iframe")[i]).attr("data-video-src")&&($(p.find("iframe")[i]).attr("src",$(p.find("iframe")[i]).data().videoSrc),$(p.find("iframe")[i]).removeAttr("data-video-src")),i++;i=void 0,0!==$(a[e]).offset().top&&p.height()+-1*$(a[e]).offset().top>$(a[e]).height()&&(t=$($(a[e]).next()),t.addClass("app-no-display"),p.height()+-1*$(a[e]).offset().top>$(a[e]).height()+(p.height()-p.height()/2)&&($.appScroll=!0,$(a[e]).removeClass("app-display").queue(function(e){return $.appScroll=!1,$(".app-nav-section-item.app-secao").text($(t).data().appCtrl.navigation.section),$(".app-nav-section-item.app-marker").text("•"),$(".app-nav-section-item.app-titulo").text($(t).data().appCtrl.navigation.page),$.appCtrl.sectionDisplay([[$(t),"in","before",{"this":p,position:10}]]),e()}))),e++}return e=void 0})}).call(this);
